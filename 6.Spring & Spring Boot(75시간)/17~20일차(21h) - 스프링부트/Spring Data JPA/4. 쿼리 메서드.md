# 쿼리 메서드

## 학습예제 소스
- [예제 소스](https://github.com/yonggyo1125/board_springboot/tree/ch4)

- 애플리케이션을 개발하려면 데이터를 조회하는 기능은 필수입니다.
- 쿼리 메서드는 스프링 데이터 JPA에서 제공하는 핵심 기능 중 하나로 Repository 인터페이스에 간단한 네이밍 룰을 이용하여 메서드를 작성하면 원하는 쿼리를 실행할 수 있습니다.

- 쿼리메서드를 이용할 때 가장 많이 사용하는 문법으로 find를 사용합니다. 엔티티의 이름은 생략이 가능하며, By 뒤에는 검색할 때 사용할 변수의 이름을 적어줍니다.

```
find + (엔티티 이름) + By + 변수이름
```

### 쿼리 메서드를 이용한 게시글 조회

- 게시글 제목을 이용하여 데이터를 조회합니다.
- 기존에 작성했던 BoardDataRepository에 findBySubject 메서드를 추가합니다.

#### src/main/java/com/codefty/repository/BoardDataRepository.java

```java
package com.codefty.repository;

import java.util.List;

import org.springframework.data.jpa.repository.JpaRepository;

import com.codefty.entity.BoardData;

public interface BoardDataRepository extends JpaRepository<BoardData, Long> {
	
	List<BoardData> findBySubject(String subject);
}
```

- subject(게시글 제목)으로 데이터를 조회하기 위해서 By 뒤에 필드명인 subject를 메서드 이름에 붙여줍니다.
- 엔티티명은 생략이 가능하므로 findBoardDataBySubject 대신에 findBySubject로 메서드명을 만들어 줍니다.
- 매개변수로 검색할 때 사용할 게시글 제목을 변수로 넘겨줍니다.


- 기존에 작성한 BoardDataRepositoryTest 클래스에 테스트 코드를 추가합니다.

#### src/test/java/com/codefty/repository/BoardDataRepositoryTest.java

```java
package com.codefty.repository;

import java.util.List;

... 생략

class BoardDataRepositoryTest {
	
	... 생략
	
	public void createBoardDatas() {
		for(int i = 1; i <= 10; i++) {
			BoardData boardData = new BoardData();
			boardData.setSubject("게시글 제목" + i);
			boardData.setContents("게시글 본문" + i);
			boardData.setRegDt(LocalDateTime.now());
			boardData.setModDt(LocalDateTime.now());
			BoardData savedBoardData = boardDataRepository.save(boardData);
		}
	}
	
	@Test
	@DisplayName("게시글 제목 조회 테스트")
	public void findBySubjectTest() {
		this.createBoardDatas();
		List<BoardData> boardDatas = boardDataRepository.findBySubject("게시글 제목1");
		for (BoardData boardData : boardDatas) {
			System.out.println(boardData);
		}
	}
}
```

- 테스트 결과

```
Hibernate: 
    select
        boarddata0_.id as id1_0_,
        boarddata0_.contents as contents2_0_,
        boarddata0_.mod_dt as mod_dt3_0_,
        boarddata0_.reg_dt as reg_dt4_0_,
        boarddata0_.subject as subject5_0_ 
    from
        board_data boarddata0_ 
    where
        boarddata0_.subject=?
		
... 생략 

... binding parameter [1] as [VARCHAR] - [게시글 제목1]

... 생략 

BoardData(id=1, subject=게시글 제목1, contents=게시글 본문1, regDt=2022-07-30T21:29:38.138752, modDt=2022-07-30T21:29:38.138752)
```

#### 쿼리 메서드 Sample 및 JPQL snippet

